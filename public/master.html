<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Master</title>

    <script src="/scripts/tools.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.js"></script>
    
    <script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.js"></script>

    <script>
        $(function () {
            var received, coords;
            var ws = new Server({
                url: "ws://127.0.0.1:8080/echo",
                open: function (m) {
                    this.send(JSON.stringify({data: 'master'}));
                },
                message: function (message) {
                    received = JSON.parse(message.data);
                    coords = JSON.parse(received.Data);

                    console.log(received);
                }
            });
        });

        /*
         // MAIN
         // standard global variables
         var container, scene, camera, renderer, controls, stats;
         var clock = new THREE.Clock();

         // custom global variables
         var mesh;

         $(function(){
         init();
         animate();
         });

         // FUNCTIONS 		
         function init() {

         scene = new THREE.Scene();

         var SCREEN_WIDTH = window.innerWidth, SCREEN_HEIGHT = window.innerHeight;
         var VIEW_ANGLE = 45, ASPECT = SCREEN_WIDTH / SCREEN_HEIGHT, NEAR = 0.1, FAR = 20000;

         camera = new THREE.PerspectiveCamera( VIEW_ANGLE, ASPECT, NEAR, FAR);
         scene.add(camera);
         camera.position.set(0,150,400);
         camera.lookAt(scene.position);	
         if ( Detector.webgl ) renderer = new THREE.WebGLRenderer( {antialias:true} );
         else renderer = new THREE.CanvasRenderer(); 
         renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);

         container = document.createElement( 'div' );
         document.body.appendChild( container );
         container.appendChild( renderer.domElement );

         // SKYBOX
         var skyBoxGeometry = new THREE.BoxGeometry( 10000, 10000, 10000 );
         var skyBoxMaterial = new THREE.MeshBasicMaterial( { color: 0xffffff, side: THREE.BackSide });
         var skyBox = new THREE.Mesh( skyBoxGeometry, skyBoxMaterial );
         scene.add(skyBox);

         // Using wireframe materials to illustrate shape details.
         var darkMaterial = new THREE.MeshBasicMaterial( { color: 0xffffcc } );
         var wireframeMaterial = new THREE.MeshBasicMaterial( { color: 0x000000, wireframe: true, transparent: true } ); 
         var multiMaterial = [ darkMaterial, wireframeMaterial ]; 

         // cube
         cube = THREE.SceneUtils.createMultiMaterialObject(new THREE.BoxGeometry(50, 50, 50, 1, 1, 1), multiMaterial);
         cube.position.set(0, 50, 100);

         cube.rotation.x = 0;
         cube.rotation.y = 0;
         cube.rotation.z = 0;
         cube.rotation.w = 0;

         console.log(cube.rotation);

         scene.add( cube );
         }

         function animate() {
         requestAnimationFrame( animate );
         render();		
         }

         function render() {
         / * 	cube.rotation.x += 0.02;
         cube.rotation.y += 0.0225;
         cube.rotation.z += 0.0175;
         * /
         / *	console.log(cube.rotation); * /
         if (received) {
         cube.rotation.x = received.x;
         cube.rotation.y = received.y;
         cube.rotation.z = received.z;
         cube.rotation.w = received.w;
         }
         renderer.render( scene, camera );
         }*/
    </script>
</head>
<body></body>
</html>
